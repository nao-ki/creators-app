
<div class="worksContent">
<div class="imagePR">
 <!--imagePR-->
  <div id="slideshow" class="slideshow">
  <div class="each">
  <%= image_tag 'image1.jpg' %>
  <span>Photo</span>
  </div>
    <div class="each">
  <%= image_tag 'image2.jpg' %>
   <span>Art</span>
  </div>
      <div class="each">
  <%= image_tag 'image4.jpg' %>
   <span>Painting</span>
  </div>
       <div class="each">
  <%= image_tag 'image5.jpg' %>
   <span>Collage</span>
  </div>
      <div class="each">
  <%= image_tag 'image8.jpg' %>
   <span>Illustration</span>
  </div>
  <!--imagePR-->
 </div>
   <div class="newsWorks">
    <div id="new">
    Recent Images
    </div>
  <div class="newImages">
  <% @images.each do |image| %>
    <%= link_to image_path(image.id) do %>
     <div class="imageWrap">
   <% if image.image.attached? %>

  <%= image_tag image.image %>

  <% end %>
        <div id="title">
        <%= image.title %>
      </div>
     </div>
     <% end %>
  <% end %>
    </div>
  </div>
</div>

<script>
document.addEventListener("turbolinks:load", function() {
	var img = $("#slideshow").children(".each"), // 画像を取得
		num = img.length, // 画像の数を数える
		count = 0, // 現在何枚目を表示しているかのカウンター
		interval = 5000; // 次の画像に切り替わるまでの時間(1/1000秒)

	img.eq(0).addClass("show"); // 最初の画像にshowクラス付与

	setTimeout(slide, interval); // slide関数をタイマーセット

	function slide() {
		img.eq(count).removeClass("show"); // 現在表示している画像からshowクラスを取り除く
		count++; // カウンターを一個進める
		if(count >= num) {
			count = 0; // カウンターが画像の数より大きければリセット
		}
		img.eq(count).addClass("show"); // 次の画像にshowクラス付与
		setTimeout(slide, interval); // 再びタイマーセット
	}
});
</script>
