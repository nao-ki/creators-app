<div class="worksContent">
<div class="soundPR">
<!--soundPR-->

  <div id="slideshow" class="slideshow">
  <div class="each">
  <%= image_tag 'sound1.png' %>
  <span>Sound</span>
  </div>
    <div class="each">
  <%= image_tag 'sound2.jpg' %>
   <span>Song</span>
  </div>
      <div class="each">
  <%= image_tag 'sound5.jpg' %>
   <span>Voice</span>
  </div>
  <!--soundPR-->

  </div>
  <div class="newsWorks">
    <div id="new">
    Recent Sounds
    </div>
     <div class="new-sounds-wrapper">
<% @sounds.each do |sound| %>
<%= link_to  sound_path(sound.id) do %>
     <div class="newSound">
  <% if sound.sound.attached? %>
  <audio src="<%= rails_blob_url(sound.sound) %>" type="sound/mp3" controls></audio>
  <% end %>
      <div id="title">
     <%= sound.title %>
      </div>
     </div>
     <% end %>
<% end %>

     </div>
     </div>
</div>
  </div>
</div>

</div>



<script>
document.addEventListener("turbolinks:load", function()  {
	var img = $("#slideshow").children(".each"), // 画像を取得
		num = img.length, // 画像の数を数える
		count = 0, // 現在何枚目を表示しているかのカウンター
		interval = 5000; // 次の画像に切り替わるまでの時間(1/1000秒)

	img.eq(0).addClass("show"); // 最初の画像にshowクラス付与

	setTimeout(slide, interval); // slide関数をタイマーセット

	function slide() {
		img.eq(count).removeClass("show"); // 現在表示している画像からshowクラスを取り除く
		count++; // カウンターを一個進める
		if(count >= num) {
			count = 0; // カウンターが画像の数より大きければリセット
		}
		img.eq(count).addClass("show"); // 次の画像にshowクラス付与
		setTimeout(slide, interval); // 再びタイマーセット
	}
});
</script>

<!--
<div class="spaces" style="margin-top: 200px; margin-left: 100px;">

<% @sounds.each do |sound| %>

  <p>title:<%= sound.title %></p>
  <p style="margin-bottom: 10px;">content:
   <%= sound.content %>
    --<%= simple_format(sound.content.gsub!(/[#＃][\w\p{Han}ぁ-ヶｦ-ﾟー]+/, "")) %>
----------------------------
    <% if sound.tags.any? %>
    <% sound.tags.each do |tag| %>
      <p>#<%= tag.name %></p>
    <% end %>
    <% end %>
-------------------------------
   </p>
  <p>poster:<%= sound.user.nickname %></p>
  <% if sound.sound.attached? %>
  <audio src="<%= rails_blob_url(sound.sound) %>" type="sound/mp3" controls></audio>
  <% end %>
  <div id="like-<%= sound.id %>">
  <%= render 'likes/sound_like', { sound: sound} %>
  </div>

<% end %>
</div>
-->